# 2.1 UserDaoTest 다시 보기
## 2.1.1 테스트의 유용성
- 테스트란 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인하여 만든 코드를 확신할 수 있게 해주는 작업이다
- 테스드의 결과가 원하는 대로 나오지 않는 경우 코드나 설계에 결함이 있음을 알 수 있다.
- 이를 통해 코드의 결함을 제거하는 디버깅을 거쳐 최종적으로 테스트를 성공시켜 결함이 없음을 증명한다.
## 2.1.2 UserDaoTest의 특징
- 해당 코드는 main() 메소드를 이용해 쉽게 테스트 수행을 가능하게 했다는 점과
- 테스트할 대상인 UserDao 를 직접 호출해서 사용한다는 점이다

### 웹을 통한 DAO 테스트 방법의 문제점
- MVC 계층을 다 만들고 웹 화면을 통해 입력값을 넣고 기능을 수핸한다? 단점이 많다.
- 모든 레이어의 기능을 다 만들어야 테스트가 가능한게 가장 큰 문제이다
- 테스트 도중 에러 발생시 어디에서 문제가 발생했는지 찾는 수고도 문제가
- 하나의 테스트를 수행하는데 참여하는 클래스와 코드가 너무 많기 때문이다

### 작은 단위의 테스트
- 테스트하고자 하는 대상이 명확하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다
- 테스트는 가능하면 작은 단위로 쪼개서 집중해서 할 수 있어야 한다.
- 관심사의 분리가 적용하는 부분이다
- 작은 단위의 테스트를 단위 테스트 라고 한다
- 단위의 크기와 범위는 정해진것은 아니다
- 충분히 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위의 단위라고 보면 된다.
- 일반적으로 단위는 작을수록 좋다
- 우리의 테스트는 DB 의 상태를 테스트가 관장하고 있다. DB 가 사용되지만 통제가능하기때문에 단위테스트로 볼 수 있다.
- 즉 통제할 수 없는 외부의 리소스에 의존하는 테스트는 단위테스트로 보기가 어렵다
- 단위 기능은 잘 동작하여도 묶어놓으면 작동이 안되는 경우도 있다. 따라서 많은 단위가 참여하는 테스트도 언젠가는 필요하다

### 단위 테스트가 필요한 이유
- 코드가 의도한 대로 작동하는지 빠르게 확인하기 위해
- 확인의 대상과 조건이 간단하고 명확할 수록 좋다
- 작은 단위로 제한해서 테스트하는 것이 편하다
- 단위 테스트는 주로 개발자가 만든 코드를 스스로 확인하기 위해 사용하는데, 그래서 이를 개발자 테스트 또는 프로그래머 테스트라고도 한다.

### 자동수행 테스트 코드
- main() 메소드를 실행하는 가장 간단한 방법만으로 테스트의 전과정이 진행된다.
- 따라서 테스트를 자주 수행해도 부담이 없다
- 이렇게 테스트는 자동으로 수행되도록 코드로 만들어지는 것이 중요하다
- 테스트 자체가 사람의 수작업을 거치기 보다 코드로 만들어져 자동으로 수행될 수 있어야하는 것이 중요하다
- 클래스를 분리하고 유연한 설계구조로 발전시키면서 테스트 코드를 넣을 위치를 결정하깅 애매해지기 때문에 구성 클래스 안에 테스트 코드를 포함시키는 것보다는 별도의 테스트용 클래스를 만들어 테스트 코드를 넣는 편이 좋다
- 자동으로 수행되는 테스트의 장점은 자주 반복할 수 있어 수정후 빠르게 테스트를 돌려 마음의 편안함을 얻는것이다

### 지속적인 개선과 점진적인 개발을 위한 테스트
- 테스트로 검증해서 만든 코드에대한 확신을 얻을 수 있다.
- 조금씩 기능을 더 추가해가면서 그에 대한 테스트도 함께 추가하는 식으로 점진적인 개발이 가능하다

## 2.1.3 UserDaoTest 의 문제점
- 수동 확인 작업의 번거로움
- 실행 작업의 번거로움 - main 인데 수백개 실행해봐...

# 2.2 UserDaoTest 개선
## 2.2.1 테스트 검증의 자동화
- junit 프레임 워크 써라

## 2.2.2 테스트의 효율적인 수행과 결과 관리
- junit 테스트 해라
- 프레임워크이기 때문에 개발자가 만든 클래스의 오브젝트를 생성하고 실행하는 일이 프레임워크에 의해 진행된다.
- 프레임워크에서 동작하는 코드는 main() 메소드도 필요 없고 오브젝트를 만들어서 실행시키는 코드를 만들 필요도 없다.

### 테스트 메소드 전환
- main() 메소드를 가진다는 것은 제어권을 직접 가진다는 말이다
- 따라서 main() 메소드에 있는 테스트 코드를 일반 메소드로 옮기자.
- junit 조건은 2가지이다
- 1. 메소드는 public 으로 선언되어야 한다
- 2. 메소드에 @Test 애노테이션을 붙여주는 것이다
- 검증 코드는 assertThat 활용한다
- 아주 쉽죠?
